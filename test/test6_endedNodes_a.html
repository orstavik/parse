<script src="../parse.js"></script>
<script>

  function test(e) {
    console.log([...e.endedNodes()].map(n => n.nodeName), [...e.openNodes()].map(n => n.nodeName));
  }
  window.addEventListener('parse', test);
  document.addEventListener('readystatechange', _ => console.log(document.readyState), {once: true});
</script>

<h3>Test of ParserObserver endedNodes</h3>
<main>
  <div>
    <script id="3">console.log("a")</script>
    <span>a
      <b>hello sunshine</b>b
    </span>c
  </div>d
  <script id="6">console.log("b")</script>
</main>